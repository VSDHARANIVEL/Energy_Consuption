<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Energy Consumption Predictor</title>
    <meta name="description" content="Calculate your household energy consumption and electricity costs in India">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #f0f9f4 0%, #e6f7ed 100%);
            min-height: 100vh;
            padding: 20px;
            color: #1a3a2e;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        .icon-circle {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 80px;
            height: 80px;
            background: rgba(52, 211, 153, 0.1);
            border-radius: 50%;
            margin-bottom: 20px;
        }

        h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #34d399, #2dd4bf);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #6b7280;
            font-size: 1.1rem;
            max-width: 600px;
            margin: 0 auto;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 6px rgba(52, 211, 153, 0.1);
            margin-bottom: 24px;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .form-row {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        select, input, button {
            padding: 10px 16px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            font-size: 14px;
            font-family: inherit;
        }

        select, input {
            background: white;
        }

        select {
            flex: 1;
            cursor: pointer;
        }

        input {
            width: 100%;
        }

        button {
            background: linear-gradient(135deg, #34d399, #2dd4bf);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 500;
            transition: opacity 0.2s;
        }

        button:hover:not(:disabled) {
            opacity: 0.9;
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }

        .btn-primary {
            padding: 14px 28px;
            font-size: 16px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-outline {
            background: white;
            color: #34d399;
            border: 2px solid #34d399;
        }

        .btn-danger {
            background: transparent;
            color: #ef4444;
            border: none;
            padding: 4px;
        }

        .appliance-item {
            background: rgba(52, 211, 153, 0.1);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 12px;
        }

        .appliance-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .appliance-name {
            font-weight: 600;
            font-size: 1rem;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        .input-group label {
            display: block;
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 4px;
        }

        .actions {
            display: flex;
            gap: 12px;
            justify-content: center;
            margin: 32px 0;
            flex-wrap: wrap;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: linear-gradient(180deg, #ffffff, #f0f9f4);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(52, 211, 153, 0.1);
        }

        .stat-label {
            font-size: 0.875rem;
            color: #6b7280;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .stat-value {
            font-size: 1.75rem;
            font-weight: bold;
            color: #1a3a2e;
            margin-bottom: 4px;
        }

        .stat-subtext {
            font-size: 0.75rem;
            color: #9ca3af;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
            margin-bottom: 24px;
        }

        .chart-container {
            position: relative;
            height: 300px;
        }

        .breakdown-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .breakdown-item {
            padding-bottom: 12px;
            border-bottom: 1px solid #e5e7eb;
        }

        .breakdown-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.875rem;
        }

        .breakdown-bar {
            width: 100%;
            height: 8px;
            background: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
        }

        .breakdown-fill {
            height: 100%;
            background: linear-gradient(90deg, #34d399, #2dd4bf);
            transition: width 0.3s ease;
        }

        .breakdown-footer {
            display: flex;
            justify-content: space-between;
            margin-top: 4px;
            font-size: 0.75rem;
            color: #6b7280;
        }

        .tips-list {
            list-style: none;
        }

        .tips-list li {
            padding: 8px 0;
            padding-left: 24px;
            position: relative;
            font-size: 0.875rem;
            line-height: 1.5;
        }

        .tips-list li:before {
            content: "‚Ä¢";
            color: #34d399;
            font-weight: bold;
            font-size: 1.5rem;
            position: absolute;
            left: 0;
            top: 4px;
        }

        .note-box {
            background: rgba(52, 211, 153, 0.1);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            color: #6b7280;
            font-size: 0.875rem;
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }

            .input-grid {
                grid-template-columns: 1fr;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="icon-circle">
                <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#34d399" stroke-width="2">
                    <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
                </svg>
            </div>
            <h1>Energy Consumption Predictor</h1>
            <p class="subtitle">Calculate your household energy consumption and get personalized recommendations to save money</p>
        </header>

        <div class="card">
            <h2 class="card-title">
                <span>‚ûï</span> Add Appliances
            </h2>
            <div class="form-row">
                <select id="applianceSelect">
                    <option value="">Select an appliance</option>
                </select>
                <button class="btn-icon" onclick="addAppliance()">+</button>
            </div>
            <div id="applianceList"></div>
        </div>

        <div class="actions">
            <button class="btn-primary" onclick="calculateEnergy()" id="calculateBtn" disabled>
                <span>üßÆ</span>
                Calculate Energy Consumption
            </button>
            <button class="btn-primary btn-outline" onclick="reset()" id="resetBtn" class="hidden">
                Reset
            </button>
        </div>

        <div id="results" class="hidden">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">‚ö° Monthly Usage</div>
                    <div class="stat-value" id="monthlyKwh">0 kWh</div>
                    <div class="stat-subtext" id="dailyKwh">0 kWh per day</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">‚Çπ Monthly Cost</div>
                    <div class="stat-value" id="monthlyCost">‚Çπ0</div>
                    <div class="stat-subtext" id="dailyCost">‚Çπ0 per day</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">üìÖ 2 Month Cost</div>
                    <div class="stat-value" id="twoMonthCost">‚Çπ0</div>
                    <div class="stat-subtext" id="twoMonthKwh">0 kWh total</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">üìà Yearly Projection</div>
                    <div class="stat-value" id="yearlyCost">‚Çπ0</div>
                    <div class="stat-subtext" id="yearlyKwh">0 kWh per year</div>
                </div>
            </div>

            <div class="results-grid">
                <div class="card">
                    <h2 class="card-title">Consumption by Appliance</h2>
                    <div class="chart-container">
                        <canvas id="pieChart"></canvas>
                    </div>
                </div>

                <div class="card">
                    <h2 class="card-title">Detailed Breakdown</h2>
                    <div class="breakdown-list" id="breakdownList"></div>
                </div>
            </div>

            <div class="card" style="background: rgba(52, 211, 153, 0.1);">
                <h2 class="card-title">üí° Energy Saving Tips</h2>
                <ul class="tips-list" id="tipsList"></ul>
            </div>
        </div>

        <div id="noteBox" class="note-box">
            <p style="margin-bottom: 8px;"><strong>Note:</strong> Calculations are based on average Indian electricity rates (‚Çπ7.5/kWh)</p>
            <p>Actual costs may vary based on your state, provider, and consumption slabs</p>
        </div>
    </div>

    <script>
        // Appliance Database
        const commonAppliances = [
            { name: "Refrigerator", category: "Kitchen", avgWattage: 150 },
            { name: "Microwave Oven", category: "Kitchen", avgWattage: 1200 },
            { name: "Electric Kettle", category: "Kitchen", avgWattage: 1500 },
            { name: "Mixer/Grinder", category: "Kitchen", avgWattage: 500 },
            { name: "Induction Cooktop", category: "Kitchen", avgWattage: 2000 },
            { name: "Water Purifier", category: "Kitchen", avgWattage: 50 },
            { name: "Air Conditioner (1.5 Ton)", category: "Cooling", avgWattage: 1500 },
            { name: "Ceiling Fan", category: "Cooling", avgWattage: 75 },
            { name: "Table Fan", category: "Cooling", avgWattage: 50 },
            { name: "Air Cooler", category: "Cooling", avgWattage: 200 },
            { name: "Room Heater", category: "Heating", avgWattage: 2000 },
            { name: "Geyser/Water Heater", category: "Heating", avgWattage: 2000 },
            { name: "LED Bulb (9W)", category: "Lighting", avgWattage: 9 },
            { name: "CFL Bulb (15W)", category: "Lighting", avgWattage: 15 },
            { name: "Tube Light", category: "Lighting", avgWattage: 40 },
            { name: "LED TV (32 inch)", category: "Entertainment", avgWattage: 60 },
            { name: "LED TV (55 inch)", category: "Entertainment", avgWattage: 100 },
            { name: "DTH/Set-top Box", category: "Entertainment", avgWattage: 20 },
            { name: "Home Theatre System", category: "Entertainment", avgWattage: 100 },
            { name: "Washing Machine", category: "Laundry", avgWattage: 500 },
            { name: "Iron", category: "Laundry", avgWattage: 1000 },
            { name: "Vacuum Cleaner", category: "Cleaning", avgWattage: 1000 },
            { name: "Desktop Computer", category: "Computing", avgWattage: 200 },
            { name: "Laptop", category: "Computing", avgWattage: 65 },
            { name: "WiFi Router", category: "Computing", avgWattage: 10 },
            { name: "Printer", category: "Computing", avgWattage: 50 },
        ];

        const ELECTRICITY_RATE = 7.5; // INR per kWh
        let appliances = [];
        let chartInstance = null;

        // Initialize
        function init() {
            const select = document.getElementById('applianceSelect');
            commonAppliances.forEach(app => {
                const option = document.createElement('option');
                option.value = app.name;
                option.textContent = `${app.name} (${app.avgWattage}W)`;
                select.appendChild(option);
            });
        }

        function addAppliance() {
            const select = document.getElementById('applianceSelect');
            const selectedName = select.value;
            if (!selectedName) return;

            const appData = commonAppliances.find(a => a.name === selectedName);
            if (!appData) return;

            const appliance = {
                id: Date.now(),
                name: appData.name,
                wattage: appData.avgWattage,
                quantity: 1,
                dailyUsageHours: 1
            };

            appliances.push(appliance);
            select.value = '';
            renderAppliances();
            updateButtons();
        }

        function removeAppliance(id) {
            appliances = appliances.filter(a => a.id !== id);
            renderAppliances();
            updateButtons();
        }

        function updateAppliance(id, field, value) {
            const appliance = appliances.find(a => a.id === id);
            if (appliance) {
                appliance[field] = parseFloat(value) || 1;
            }
        }

        function renderAppliances() {
            const list = document.getElementById('applianceList');
            if (appliances.length === 0) {
                list.innerHTML = '';
                return;
            }

            list.innerHTML = appliances.map(app => `
                <div class="appliance-item">
                    <div class="appliance-header">
                        <div class="appliance-name">${app.name}</div>
                        <button class="btn-danger" onclick="removeAppliance(${app.id})">üóëÔ∏è</button>
                    </div>
                    <div class="input-grid">
                        <div class="input-group">
                            <label>Quantity</label>
                            <input type="number" min="1" value="${app.quantity}" 
                                onchange="updateAppliance(${app.id}, 'quantity', this.value)">
                        </div>
                        <div class="input-group">
                            <label>Daily Hours</label>
                            <input type="number" min="0.5" max="24" step="0.5" value="${app.dailyUsageHours}"
                                onchange="updateAppliance(${app.id}, 'dailyUsageHours', this.value)">
                        </div>
                        <div class="input-group">
                            <label>Wattage</label>
                            <input type="number" min="1" value="${app.wattage}"
                                onchange="updateAppliance(${app.id}, 'wattage', this.value)">
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function updateButtons() {
            const calculateBtn = document.getElementById('calculateBtn');
            const resetBtn = document.getElementById('resetBtn');
            calculateBtn.disabled = appliances.length === 0;
            
            if (appliances.length > 0) {
                resetBtn.classList.remove('hidden');
            } else {
                resetBtn.classList.add('hidden');
            }
        }

        function calculateEnergy() {
            if (appliances.length === 0) return;

            let totalDailyKwh = 0;
            const breakdown = [];

            appliances.forEach(app => {
                const dailyKwh = (app.wattage * app.quantity * app.dailyUsageHours) / 1000;
                const monthlyKwh = dailyKwh * 30;
                const monthlyCost = monthlyKwh * ELECTRICITY_RATE;

                totalDailyKwh += dailyKwh;

                breakdown.push({
                    ...app,
                    dailyKwh,
                    monthlyKwh,
                    monthlyCost
                });
            });

            const monthlyConsumption = totalDailyKwh * 30;
            const yearlyConsumption = totalDailyKwh * 365;
            const monthlyCost = monthlyConsumption * ELECTRICITY_RATE;
            const yearlyCost = yearlyConsumption * ELECTRICITY_RATE;
            const twoMonthCost = monthlyCost * 2;

            breakdown.forEach(item => {
                item.percentageOfTotal = monthlyConsumption > 0 
                    ? (item.monthlyKwh / monthlyConsumption) * 100 
                    : 0;
            });

            breakdown.sort((a, b) => b.monthlyKwh - a.monthlyKwh);

            displayResults({
                dailyConsumption: totalDailyKwh,
                monthlyConsumption,
                yearlyConsumption,
                monthlyCost,
                yearlyCost,
                twoMonthCost
            }, breakdown);
        }

        function displayResults(totals, breakdown) {
            document.getElementById('monthlyKwh').textContent = totals.monthlyConsumption.toFixed(2) + ' kWh';
            document.getElementById('dailyKwh').textContent = totals.dailyConsumption.toFixed(2) + ' kWh per day';
            document.getElementById('monthlyCost').textContent = '‚Çπ' + totals.monthlyCost.toFixed(2);
            document.getElementById('dailyCost').textContent = '‚Çπ' + (totals.monthlyCost / 30).toFixed(2) + ' per day';
            document.getElementById('twoMonthCost').textContent = '‚Çπ' + totals.twoMonthCost.toFixed(2);
            document.getElementById('twoMonthKwh').textContent = (totals.monthlyConsumption * 2).toFixed(2) + ' kWh total';
            document.getElementById('yearlyCost').textContent = '‚Çπ' + totals.yearlyCost.toFixed(2);
            document.getElementById('yearlyKwh').textContent = totals.yearlyConsumption.toFixed(2) + ' kWh per year';

            renderChart(breakdown);
            renderB
